<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–õ–µ—Å–Ω–æ–π –õ–∞–≥–µ—Ä—å üå≤ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</title>
    <style>
        :root {
            --primary: #28a745;
            --accent: #1877f2;
            --bg-dark: rgba(0, 0, 0, 0.85);
        }

        body {
            margin: 0; padding: 20px; font-family: 'Segoe UI', Tahoma, sans-serif;
            background: linear-gradient(rgba(0,0,0,0.7), rgba(0,0,0,0.7)), 
                        url('https://i.ytimg.com/vi/j2nIMEMgcxQ/maxresdefault.jpg');
            background-size: cover; background-position: center; background-attachment: fixed;
            color: white; display: flex; flex-direction: column; align-items: center; min-height: 100vh;
        }

        .container { width: 100%; max-width: 420px; text-align: center; }

        .forest-title { 
            font-size: 36px; font-weight: 900; text-shadow: 3px 3px 15px rgba(0,0,0,0.8);
            margin-bottom: 10px; letter-spacing: 1px;
        }

        .subtitle { margin-bottom: 30px; font-style: italic; opacity: 0.9; }

        /* –ö–∞—Ä—Ç–æ—á–∫–∞ –∞–Ω–∫–µ—Ç—ã */
        .card { 
            background: white; color: #2d3436; padding: 30px; border-radius: 25px; 
            box-shadow: 0 20px 50px rgba(0,0,0,0.5); margin-bottom: 30px;
            border: 1px solid rgba(255,255,255,0.2);
        }

        h2 { margin: 0 0 20px 0; color: var(--accent); font-size: 24px; }
        
        .input-group { text-align: left; margin-bottom: 15px; }
        label { display: block; font-weight: bold; margin-bottom: 5px; font-size: 14px; color: #636e72; }

        input, select, textarea { 
            width: 100%; padding: 14px; border: 2px solid #dfe6e9; 
            border-radius: 12px; font-size: 16px; box-sizing: border-box; outline: none;
            transition: 0.3s;
        }
        input:focus, select:focus { border-color: var(--accent); box-shadow: 0 0 8px rgba(24,119,242,0.2); }

        button { 
            width: 100%; padding: 18px; background: var(--primary); color: white; 
            border: none; border-radius: 12px; font-weight: 900; cursor: pointer; font-size: 18px;
            transition: 0.3s; text-transform: uppercase; letter-spacing: 1px;
            box-shadow: 0 4px 15px rgba(40,167,69,0.3);
        }
        button:hover { background: #218838; transform: translateY(-2px); box-shadow: 0 8px 25px rgba(40,167,69,0.5); }
        button:active { transform: translateY(0); }

        /* –°–ø–∏—Å–æ–∫ */
        .list-container { width: 100%; display: none; animation: slideUp 0.6s ease; }
        @keyframes slideUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }

        .stats-bar { background: var(--accent); padding: 10px; border-radius: 10px; margin-bottom: 20px; font-weight: bold; }

        .entry { 
            background: var(--bg-dark); padding: 20px; margin-bottom: 15px; 
            border-radius: 18px; border-left: 8px solid var(--primary); text-align: left;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        .entry strong { color: #58ff8b; font-size: 22px; display: block; margin-bottom: 5px; }
        .entry .role-tag { 
            display: inline-block; background: var(--accent); color: white; 
            padding: 3px 10px; border-radius: 5px; font-size: 12px; margin-bottom: 10px;
        }
        .entry p { margin: 5px 0; color: #dfe6e9; line-height: 1.4; }
        .entry .date { font-size: 11px; color: #636e72; margin-top: 10px; text-align: right; }

        #status { margin-top: 15px; font-weight: bold; color: var(--primary); }
    </style>
</head>
<body>

    <div class="forest-title">üå≤ –õ–ï–°–ù–û–ô –ü–†–û–ï–ö–¢</div>
    <div class="subtitle">–ü–æ—Å—Ç—Ä–æ–π —Å–≤–æ—ë –±—É–¥—É—â–µ–µ —Å—Ä–µ–¥–∏ –¥–µ—Ä–µ–≤—å–µ–≤</div>

    <div class="container">
        <div class="card" id="formBox">
            <h2>–ü–†–ò–°–û–ï–î–ò–ù–ò–¢–¨–°–Ø</h2>
            
            <div class="input-group">
                <label>–í–∞—à–µ –ò–º—è</label>
                <input type="text" id="fn" placeholder="–ù–∞–ø—Ä. –ê–ª–µ–∫—Å–∞–Ω–¥—Ä">
            </div>

            <div class="input-group">
                <label>–í–∞—à–∞ –§–∞–º–∏–ª–∏—è</label>
                <input type="text" id="ln" placeholder="–ù–∞–ø—Ä. –ò–≤–∞–Ω–æ–≤">
            </div>

            <div class="input-group">
                <label>–í–∞—à–∞ —Ä–æ–ª—å –≤ –ª–∞–≥–µ—Ä–µ</label>
                <select id="role">
                    <option value="–°—Ç—Ä–æ–∏—Ç–µ–ª—å">üî® –°—Ç—Ä–æ–∏—Ç–µ–ª—å (—Å—Ç—Ä–æ—é –¥–æ–º–∞)</option>
                    <option value="–û—Ö–æ—Ç–Ω–∏–∫/–°–±–æ—Ä—â–∏–∫">üèπ –û—Ö–æ—Ç–Ω–∏–∫/–°–±–æ—Ä—â–∏–∫ (–∏—â—É –µ–¥—É)</option>
                    <option value="–ü–æ–≤–∞—Ä">üç≥ –ü–æ–≤–∞—Ä (–≥–æ—Ç–æ–≤–ª—é –Ω–∞ –∫–æ—Å—Ç—Ä–µ)</option>
                    <option value="–û—Ö—Ä–∞–Ω–Ω–∏–∫">üõ°Ô∏è –û—Ö—Ä–∞–Ω–Ω–∏–∫ (—Å–ª–µ–∂—É –∑–∞ –ø–æ—Ä—è–¥–∫–æ–º)</option>
                    <option value="–ò–Ω–∂–µ–Ω–µ—Ä">‚öôÔ∏è –ò–Ω–∂–µ–Ω–µ—Ä (–¥–µ–ª–∞—é –º–µ—Ö–∞–Ω–∏–∑–º—ã)</option>
                </select>
            </div>

            <div class="input-group">
                <label>–í–æ–∑—Ä–∞—Å—Ç</label>
                <input type="number" id="age" placeholder="–°–∫–æ–ª—å–∫–æ –≤–∞–º –ª–µ—Ç?">
            </div>

            <div class="input-group">
                <label>–ß—Ç–æ –∏–º–µ–Ω–Ω–æ —Ç—ã –±—É–¥–µ—à—å –¥–µ–ª–∞—Ç—å?</label>
                <textarea id="goal" placeholder="–ù–∞–ø–∏—à–∏ –ø–æ–¥—Ä–æ–±–Ω–µ–µ –æ —Å–≤–æ–∏—Ö –ø–ª–∞–Ω–∞—Ö..." rows="3"></textarea>
            </div>

            <button id="submitBtn" onclick="saveData()">–í–°–¢–£–ü–ò–¢–¨ –í –û–¢–†–Ø–î</button>
            <div id="status"></div>
        </div>

        <div class="list-container" id="listBox">
            <div class="stats-bar" id="stats">–í—Å–µ–≥–æ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤: 0</div>
            <div id="displayArea"></div>
            <button onclick="location.reload()" style="background:#444; margin-top:20px; font-size:14px;">–ó–ê–ü–ò–°–ê–¢–¨ –ï–©–ï</button>
        </div>
    </div>

    <script>
        // –¢–≤–æ–π –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–π ID
        const API_URL = "https://api.npoint.io/ad618be876cb8968fb5c";

        async function loadData() {
            try {
                const response = await fetch(API_URL);
                const data = await response.json();
                return Array.isArray(data) ? data : [];
            } catch (err) { return []; }
        }

        function renderList(list) {
            const area = document.getElementById('displayArea');
            document.getElementById('stats').innerText = `–í—Å–µ–≥–æ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤: ${list.length}`;
            
            if (list.length === 0) {
                area.innerHTML = "–ü–æ–∫–∞ –ª–∞–≥–µ—Ä—å –ø—É—Å—Ç...";
                return;
            }
            area.innerHTML = list.slice().reverse().map(p => `
                <div class="entry">
                    <div class="role-tag">${p.role || '–£—á–∞—Å—Ç–Ω–∏–∫'}</div>
                    <strong>${p.fn} ${p.ln}</strong>
                    <p>–í–æ–∑—Ä–∞—Å—Ç: ${p.age} –ª–µ—Ç</p>
                    <p><i>${p.goal}</i></p>
                    <div class="date">–ó–∞–ø–∏—Å–∞–Ω: ${p.time || '–Ω–µ–¥–∞–≤–Ω–æ'}</div>
                </div>
            `).join('');
        }

        async function saveData() {
            const btn = document.getElementById('submitBtn');
            const status = document.getElementById('status');
            
            const fn = document.getElementById('fn').value.trim();
            const ln = document.getElementById('ln').value.trim();
            const age = document.getElementById('age').value;
            const role = document.getElementById('role').value;
            const goal = document.getElementById('goal').value.trim();

            if (!fn || !age || !goal) return alert("–ó–∞–ø–æ–ª–Ω–∏ –≤—Å–µ –≤–∞–∂–Ω—ã–µ –ø–æ–ª—è!");

            btn.disabled = true;
            status.innerText = "‚è≥ –û—Ç–ø—Ä–∞–≤–∫–∞ –≥–æ–Ω—Ü–∞ –≤ –ª–∞–≥–µ—Ä—å...";

            try {
                const currentList = await loadData();
                
                // –î–æ–±–∞–≤–ª—è–µ–º –≤—Ä–µ–º—è –∑–∞–ø–∏—Å–∏
                const now = new Date();
                const timeStr = now.toLocaleDateString() + " " + now.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});

                currentList.push({ fn, ln, age, role, goal, time: timeStr });

                const res = await fetch(API_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(currentList)
                });

                if (res.ok) {
                    status.innerText = "‚úÖ –¢—ã –≤ –∫–æ–º–∞–Ω–¥–µ!";
                    setTimeout(() => {
                        document.getElementById('formBox').style.display = 'none';
                        document.getElementById('listBox').style.display = 'block';
                        renderList(currentList);
                    }, 800);
                } else {
                    status.innerText = "‚ùå –û—à–∏–±–∫–∞ –∑–∞–ø–∏—Å–∏.";
                    btn.disabled = false;
                }
            } catch (err) {
                status.innerText = "‚ùå –û—à–∏–±–∫–∞ —Å–µ—Ç–∏.";
                btn.disabled = false;
            }
        }
    </script>
</body>
</html>
