<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ù–∞—à –õ–∞–≥–µ—Ä—å</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: 'Arial', sans-serif;
            /* –¢–≤–æ—è –∫–∞—Ä—Ç–∏–Ω–∫–∞ –Ω–∞ —Ñ–æ–Ω–µ */
            background: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.6)), 
                        url('https://i.ytimg.com/vi/j2nIMEMgcxQ/maxresdefault.jpg');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            color: white;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .main-box {
            background: rgba(255, 255, 255, 0.95);
            color: #222;
            padding: 25px;
            border-radius: 15px;
            width: 100%;
            max-width: 380px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }

        h1 { margin-top: 0; text-align: center; color: #1877f2; font-size: 28px; }

        label { display: block; margin-top: 10px; font-weight: bold; font-size: 14px; }

        input, textarea {
            width: 100%;
            padding: 12px;
            margin-top: 5px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            box-sizing: border-box;
        }

        button {
            width: 100%;
            padding: 15px;
            background: #28a745;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 18px;
            font-weight: bold;
            margin-top: 20px;
            cursor: pointer;
        }

        button:hover { background: #218838; }

        .list-section {
            width: 100%;
            max-width: 400px;
            margin-top: 30px;
        }

        .user-card {
            background: rgba(0, 0, 0, 0.8);
            border: 1px solid #444;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 10px;
        }

        .user-card b { color: #58ff8b; font-size: 18px; }
        
        #status { text-align: center; margin-top: 10px; font-weight: bold; }
    </style>
</head>
<body>

    <h1 style="color: white; text-shadow: 2px 2px 10px black;">üå≤ –õ–ï–°–ù–û–ô –ü–†–û–ï–ö–¢</h1>
    <p style="text-shadow: 1px 1px 5px black;">–ù–∞–º –Ω—É–∂–Ω—ã –ª—é–¥–∏. –ó–∞–ø–∏—à–∏—Å—å –Ω–∏–∂–µ!</p>

    <div class="main-box">
        <h1>–ê–Ω–∫–µ—Ç–∞</h1>
        
        <label>–ò–º—è –∏ –§–∞–º–∏–ª–∏—è</label>
        <input type="text" id="name" placeholder="–ù–∞–ø—Ä: –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤">

        <label>–°–∫–æ–ª—å–∫–æ —Ç–µ–±–µ –ª–µ—Ç?</label>
        <input type="number" id="age" placeholder="–í–æ–∑—Ä–∞—Å—Ç">

        <label>–ó–∞—á–µ–º —Ç—ã –Ω–∞–º –Ω—É–∂–µ–Ω?</label>
        <textarea id="goal" placeholder="–ù–∞–ø—Ä: –£–º–µ—é —Å—Ç—Ä–æ–∏—Ç—å –∏–ª–∏ —Ö–æ—á—É –ø–æ–º–æ—á—å" rows="2"></textarea>

        <button id="goBtn" onclick="save()">–û–¢–ü–†–ê–í–ò–¢–¨</button>
        <div id="status"></div>
    </div>

    <div class="list-section">
        <h2 style="text-align: center; text-shadow: 2px 2px 5px black;">–ö—Ç–æ —É–∂–µ —Å –Ω–∞–º–∏:</h2>
        <div id="people">–ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞...</div>
    </div>

    <script>
        const API = "https://api.npoint.io/29da76d74d4beedc7143";

        async function getList() {
            try {
                const res = await fetch(API);
                const data = await res.json();
                const list = Array.isArray(data) ? data : [];
                
                const box = document.getElementById('people');
                if(list.length === 0) {
                    box.innerHTML = "<p style='text-align:center'>–ü–æ–∫–∞ –Ω–∏–∫–æ–≥–æ –Ω–µ—Ç...</p>";
                } else {
                    box.innerHTML = list.slice().reverse().map(p => `
                        <div class="user-card">
                            <b>${p.name}</b> (${p.age} –ª–µ—Ç)<br>
                            <i style="color: #ccc">${p.goal}</i>
                        </div>
                    `).join('');
                }
                return list;
            } catch (e) { return []; }
        }

        async function save() {
            const btn = document.getElementById('goBtn');
            const status = document.getElementById('status');
            
            const n = document.getElementById('name').value;
            const a = document.getElementById('age').value;
            const g = document.getElementById('goal').value;

            if(!n || !a) { alert("–ó–∞–ø–æ–ª–Ω–∏ –∏–º—è –∏ –≤–æ–∑—Ä–∞—Å—Ç!"); return; }

            btn.disabled = true;
            status.innerText = "‚è≥ –°–æ—Ö—Ä–∞–Ω—è—é...";

            try {
                const list = await getList();
                list.push({ name: n, age: a, goal: g });

                await fetch(API, {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify(list)
                });

                status.style.color = "green";
                status.innerText = "‚úÖ –ì–æ—Ç–æ–≤–æ!";
                document.querySelectorAll('input, textarea').forEach(i => i.value = '');
                getList();
            } catch (e) {
                status.style.color = "red";
                status.innerText = "‚ùå –û—à–∏–±–∫–∞!";
            } finally {
                btn.disabled = false;
            }
        }

        getList();
    </script>
</body>
</html>
